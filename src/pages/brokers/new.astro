---
import { BrokerForm } from '~/components/BrokerForm'
import Layout from '~/layouts/Layout.astro'

const { session } = Astro.locals
if (!session?.userId) {
  return Astro.redirect('/auth?redirect=/brokers/new')
}
---

<Layout title='New Broker'>
  <main class='container mx-auto px-4 py-8'>
    <div class='mb-8 flex items-center'>
      <a href='/brokers' class='mr-4 inline-flex items-center text-zinc-400 hover:text-zinc-300'>
        <svg
          xmlns='http://www.w3.org/2000/svg'
          class='mr-1 h-5 w-5'
          viewBox='0 0 20 20'
          fill='currentColor'
        >
          <path
            fill-rule='evenodd'
            d='M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z'
            clip-rule='evenodd'></path>
        </svg>
        Back
      </a>
      <h1 class='text-3xl font-bold'>Add New Broker</h1>
    </div>

    <div class='mx-auto max-w-2xl rounded-lg border border-zinc-800 bg-zinc-900/50 p-6'>
      <BrokerForm client:load />
    </div>
  </main>
</Layout>
